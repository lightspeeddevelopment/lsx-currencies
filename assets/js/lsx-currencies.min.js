var lsx_money=fx.noConflict();LSX_Currencies={initThis:function(){"1"===lsx_currencies_params.script_debug&&(console.log("[LSX_Currencies.switchCurrency] lsx_currencies_params:"),console.log(lsx_currencies_params)),""!==lsx_currencies_params.rates&&(lsx_money.rates=lsx_currencies_params.rates,lsx_money.base="USD",this.current_currency=lsx_currencies_params.current_currency,this.current_currency===lsx_currencies_params.base&&"1"!==lsx_currencies_params.convert_to_single||this.checkAmounts(lsx_currencies_params.base),this.watchMenuSwitcher(),jQuery(document).on("facetwp-loaded",function(){console.log(LSX_Currencies),console.log("triggering the refresh."),LSX_Currencies.checkAmounts()}))},checkAmounts:function(r){var e=this;console.log(jQuery(".amount.lsx-currencies")),jQuery(".amount.lsx-currencies").each(function(){var r="",c="",n="";if(base_currency=lsx_currencies_params.base,base_currency=e.findAvailableCurrency(base_currency,this),jQuery(this).hasClass("woocommerce-Price-amount")?(n=jQuery(this).attr("data-price-"+e.current_currency.toLowerCase()),r=jQuery(this).attr("data-price-"+base_currency)):(n=jQuery(this).find(".value").attr("data-price-"+e.current_currency.toLowerCase()),r=jQuery(this).find(".value").attr("data-price-"+base_currency.toLowerCase())),c=void 0!==n&&!1!==n&&"0.00"!==n&&"0"!==n?n:e.switchCurrency(base_currency,e.current_currency,r),jQuery(this).hasClass("woocommerce-Price-amount")){var s=e.current_currency;void 0!==lsx_currencies_params.currency_symbols[e.current_currency]&&(s=lsx_currencies_params.currency_symbols[e.current_currency]);var t='<span class="woocommerce-Price-currencySymbol">'+s+"</span>"+c;jQuery(this).html(t)}else jQuery(this).find(".value").html(c),jQuery(this).find(".currency-icon").prop("class","").addClass("currency-icon").addClass(e.current_currency.toLowerCase()).html(e.current_currency)})},switchCurrency:function(r,e,c){return"1"===lsx_currencies_params.script_debug&&(console.log("[LSX_Currencies.switchCurrency] from: "+r),console.log("[LSX_Currencies.switchCurrency] to: "+e)),c=lsx_money(c).from(r).to(e),c=this.formatAmount(c)},formatAmount:function(r){return r=1===lsx_currencies_params.remove_decimals||"1"===lsx_currencies_params.remove_decimals?accounting.formatNumber(r,0,",","."):accounting.formatNumber(r,2,",",".")},watchMenuSwitcher:function(){var r=this;jQuery(".menu-item-currency a").on("click",function(e){e.preventDefault(),from=r.current_currency;var c=jQuery(this).attr("href").replace("#","");r.current_currency=c.toUpperCase();if(!jQuery(this).hasClass("current")){var n="";1==lsx_currencies_params.flags&&(n='<span class="flag-icon flag-icon-'+c.substring(0,2)+'"></span> '),jQuery(this).parents("li.menu-item-currency-current").find("a.current").attr("href","#"+c).html(n+r.current_currency+'<span class="currency-icon '+c+'"></span><span class="caret"></span>'),jQuery(this).parents("li.menu-item-currency-current").find("li.hidden").show().removeClass("hidden"),jQuery(this).parent().hide().addClass("hidden")}Cookies.set("lsx_currencies_choice",r.current_currency),r.checkAmounts(from,r.current_currency)})},menuLabelToggle:function(r){return r=accounting.formatNumber(r,2,",",".")},findAvailableCurrency:function(r,e){for(const[c,n]of Object.entries(lsx_currencies_params.currency_symbols))lower_key=c.toLowerCase(),strict_amount=jQuery(e).find(".value").attr("data-price-"+lower_key),void 0!==strict_amount&&"0.00"!==strict_amount&&"0"!==strict_amount&&"0"!==strict_amount&&(r=c);return r}},jQuery(document).ready(function(){LSX_Currencies.initThis()});